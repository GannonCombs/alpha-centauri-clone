***************************************************************************

** Beta test **

***************************************************************************


The following are things I "added" but haven't tested to ensure correctness.

First, the meta-issue. I created a debug mode to be able to test anything.
Use it to test the following issues, but also test debug mode along the way.

✅

 2. Energy Allocation System
  - Split energy production between Economy, Labs, and Psych
  - Economy → Energy reserves (treasury)
  - Labs → Research speed
  - Psych → Talent creation (happiness)
  - Adjustable slider/percentage allocation

  3. Psych, Drones, and Talents System
  - Drones = unhappy citizens (appear based on difficulty and base size)
  - Talents = happy citizens (created via Psych allocation or facilities)
  - Drone Riots occur when Drones > Talents (production stops)
  - Facilities like Recreation Commons reduce drones
  - Police units can suppress drones (based on POLICE social engineering)

    5. Unit Support & Maintenance
  - Units cost minerals to support (based on SUPPORT social engineering)
  - Free support levels (2 units per base by default)
  - Exceeding support level drains minerals from production
  - "Clean Reactor" ability eliminates support costs

  9. Air Units & Fuel/Range
  - Air units have limited range (must return to base/airbase)
  - Range measured in turns from base
  - Needlejets: 2 turn range, Copters: 1 turn range
  - Airbases allow refueling
  - Air superiority combat (+100% vs. air, -50% vs. ground)

     Feature 12: Special Unit Abilities

  - Clean Reactor: No support cost
  - AAA Tracking: +100% vs air units
  - Comm Jammer: +50% attack
  - Blink Displacer: Ignores base defense
  - Empath Song: +50% vs psi armor
  - Framework ready for Cloaking, Drop Pods, Amphibious Pods, Fungal Payload


    13. Probe Teams
  - Infiltrate datalinks
  - Steal technology
  - Sabotage facilities
  - Incite drone riots
  - Mind control units/bases
  - Success rate based on PROBE social engineering

     Feature 14: Sea Transport & Loading

  - Sea units can carry up to 4 land units
  - Loaded units move with transport automatically
  - Unload to adjacent land tiles
  - Loaded units destroyed if transport is destroyed


    Feature 15: Disengage Mechanic

  - Fast units can escape when damaged to 50% or less HP
  - Requires 2+ movement advantage over opponent
  - Success chance: 50% base + morale bonuses + speed bonuses
  - Units retreat to safe adjacent tiles

   Feature 24: Base Conquest (Disloyal Citizens)                                                              ─

  - Captured bases have disloyal citizens for 50 turns
  - Formula: 5 - (turns_since_capture // 10), capped by base size
  - Extra drones make conquered bases harder to manage
  - Works with both combat conquest and probe mind control


   Feature 25: Planetary Council Proposals

  - Added 5 proposals: Unity Core, Global Trade Pact, Solar Shade, Melt Polar Caps, Atrocity Prohibitions
  - Voting UI fully functional
  - Effects implemented (some stubbed for future work)

   Feature 26: Victory Conditions

  - Conquest: Eliminate all enemies
  - Diplomatic: 20 turns as Supreme Leader
  - Economic: 50k credits + Economic Victory project
  - Transcendence: Complete Ascent to Transcendence

  Feature x: Artillery
  - Right click
  - Some hot key also activates


***************************************************************************

** Known Bugs **

***************************************************************************



Notes:
(several of these are POSSIBLY fixed)
1 The amount of time units/facilities take to produce is hardcoded. Need to make dynamic. Check game files for details.
2 Once we get the commlink of every living faction, give a popup that we now have them all, and thus can now call council.
3 If another unit gets all contacts first, they may call council. Add to the AI behavior that encourages them to call things
that they like. Examples: remove atrocity prohibitions if their faction is warlike, elect governor if they are a candidate, etc.
4 In the tech screen, there is a little text box inside the tech that is colored the correct category of the tech (it's 4x color).
This is great. However, the outline for the tech box itself is always yellow. It should be the same 4x color.
5 There's something odd where the 7 starting techs are all white in the tech view, but we don't have access to their perks.
We should NOT be starting with the 7 starting techs. Each 1 is the starting tech for a particular faction. Check game files for details.
6 Hold unit isn't working. Still in W cycle, and End Turn still doesn't activate correctly after.

More notes:
The keyword "hand" for a 1-1-x should be "Scout" instead.
My dialogue text to exit is "Deirdre out." I am the Spartans! The dialog must be dynamic!
I have dialog texts at the same time to sign a treaty AND a pact. You can only offer a pact after you're already in a treaty.
When I offer a treaty to Zakharov, his response is to pitch a treaty to me. That makes no sense. Look at the script notes for
#MAKETREATY and #REJTREATY. Those should be the responses.
When I rejected the treaty, Zakharov said something about opportunities not presenting themselves twice. Again, you are NOT
allowed to invent your own dialog under any circumstances!
When I asked for a loan, I was offered one, but my choices were to reject it, or Agreed. But if you rob me you shall feel my wrath."
That doesn't make sense. I'm receiving the loan. Find the correct dialog here.
When I said "Deirdre out" Zakharov ended with "My apologies, $TITLE0, but I simply haven't all day to talk. $NAME2 out."
This is not correct either. This is a dialog to interrupt you when you are taking too long in the dialog view in the harder
game modes. There should be no response when we exit.


Issues: Hurry is still showing a different number of turns remaining compared to the production panel. Make sure these are pulling
from the same data.
I met Morgan, and it started us off with a treaty, without asking for one. This is wrong. The default status is Truce.
Esc exited in the middle of a dialog. This is one view where Esc should NOT work.
Even with a faction having a treaty with me, I can attack them with impunity. Killing their unit did not switch to Vendetta.
If I suggest an attack on an entreatied faction's unit, a popup should show. Check #BREAKINGTREATY and #BREAKINGTRUCE for info.
When entering a faction name, I'm still not seeing the placeholder text being entirely selected. It should be, so that backspace
gets rid of all of it with one press.



There is new odd behavior in the Hurry screen. On the first turn, I tried to hurry a scout patrol. It says "Remaining: 3 turns (6 credits)
Your credits: 500" (I got a supply pod.) I click Pay All, and it fills with 30. It can't be 6 AND 30. My guess is, you've started
to get off the hardcoded costs we set a while back. That would be fine. But consistency is most important now. But at least OK works.
The speeder creation is still not fixed. I created another speeder and it can only move 1 a turn. Also, make sure the unit stats
show at the bottom of its square in the Select Production view. Ditto in the Saved Design squares. This will help debug where the issue is.
Under every base is current research. Fine for now, but enemy research is only visible in certain scenarios.

Even more notes:
You have not fixed the dialog where we propose the treaty. They should respond with one of the #MAKETREATY or #REJTREATY scripts.
They should not prompt US to sign a treaty. If they accept, the treaty is done; no decision is needed on our end if we proposed it.
Also, when I ask a faction for a loan, they respond by asking ME for a loan. You have your prompts all messed up.
Really try to reason through prompts that I should initiate versus NPC-initiated. Focus on implementing player-initiated for now.
Also, the exit dialog is STILL hardcoded to "Deirdre out." When I am NOT Deirdre!!! Edit: Also got "Greetings, Deirdre."
I also just finished a conversation with a player without signing a treaty. This should put us in FORMAL truce and show "TRUCE"
in the commlinks. Instead, it shows nothing (informal truce). Zakharov then attacked me, and yet the commlink didn't convert to
VENDETTA. Fix.

Latest notes:
A 1-1-2 is STILL called Hand Speeder. It should be called Scout Speeder, for the last time.
You've also recently introduced a large bug in hurry. I think it was when you tried to match credits to pay all. But hitting Pay All
does not, in fact, Pay All. It seems to be paying one turn. I can then click hurry again, which is a bug. You can only hurry once per turn.
Ensure that the amount offered with Pay All is truly the ENTIRE remaining cost. Then make sure the other displayed cost matches.
The new design finally worked. The only issue was, the new design pop up should happen AFTER the new tech discovered popup.
Otherwise, it seems strange that we can build these new units that we don't have the tech for.
New unit design on better unit tech is still not popping up, at least not consistently.

When I asked for a treaty, the faction responded with 2 messages instead of 1. Neither was in the messages I told you.
They MUST respond with something in #MAKETREATYx or #REJTREATYy. For example: "With respect, $TITLE1, it appears there is little future in
'permanent' agreements with the $FACTION2."
Character I have treaties with are still attacking me. Note: it is possible to betray someone (though this is rare behavior).
But having TREATY status afterward is a bug. It should say VENDETTA.
Right now, enemy bases say what they're working on. This should only be the case if I have a Pact with them, or Empath Guild,
or am Governor, or have Infiltrated their Datalinks.
Need to start decommissioning the UNIT types in constants, especially the colony pods. All data I need on a unit is in their
chassis/weapon/armor etc. I don't need to call anyone out specifically.

Scout patrol is hardcoded in too many places - check base.py, among others.
Council is still not restricted if I am missing commlinks.
Got a diplomatic milestone popup when missing commlinks.
Production times are off. Merchant Exchange takes 20 turns on Turn 1 for Morgan.
Clean up constants. Many of the values inside are not...constants. There are also two "constants," with the other in game.
My unit "met" the opponent's empty base. It did not trigger a call.
Big clean up needed with static data files. Some need to be separated out from funcs (i.e. facilities.py),
and some need reconsolidation (i.e. constants.py, data.py, factionText)
I've removed votes from data.FACTIONS. This will cause an error once I vote.
Santiago needs to start with a rover. (Does Morgan start with a Synthmetal Garrison, too?)
Made a treaty with someone. It still showed truce in commlinks.
Check save overwrites. If the exact same name exists, popup that says Are You Sure you want to overwrite?
I broke load game.

When Claude Code is back online, start by asking it to review the new folder structure. See if it thinks it needs further subdivision.
Then ask it to update general_index.md, and any other files that are out of date on structure and purpose.




***************************************************************************

** Biggest categories we haven't even touched: **

***************************************************************************



Art
Sounds
Terraforming
Resources
Enemy tech tree/units
Enemy moods
Fog of war
Advanced unit movement (G command, J command, drag path)
Automatic end turn vs button
V to hover