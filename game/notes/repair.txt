This is a note to outline how repair works in the codebase, since Claude keeps breaking it.
Note: Claude may NOT edit this file.

In repair.py:
- calculate_repair()
- _calculate_repair_percentage()
- _is_bombarded()


Flow:

0 Start_new_turn calls _process_unit_repair. (It's also called during AI turns.)

1 _process_unit_repair:
- This calls calculate_repair.
- This incorrectly says we heal at end of turn in the notes.
- After calculating, calls unit.repair()

2 calculate_repair:
Returns repair_amount.
- Checks a string 'repair_eligible'. This feels a little goofy but maybe it's the only way.
- Checks for monolith repair here too. Worried about this, as this is instant, unlike other healing. And I've seen
- other monolith healing code in game.py.
- Returns to _process_unit_repair.

3: Unit.repair:
- This is the functional that ACTUALLY heals the unit.


Secret projects still need global tracking. My current lookups are stopgaps.
I was going to create a dict completed_secret_projects, mapping project names to factions, and then maintain at the base
level, and synchronize the two data structures. But there is already a built_projects set.
TODO: I need to figure out how it works first. Edit: it's used all over the place. Gonna be a heavy lift, if I need to.

TODO: Figure out bombardment checks.
